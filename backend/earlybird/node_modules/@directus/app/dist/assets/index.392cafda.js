var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,i=(e,t)=>{for(var a in t||(t={}))o.call(t,a)&&r(e,a,t[a]);if(n)for(var a of n(t))s.call(t,a)&&r(e,a,t[a]);return e},l=(e,n)=>t(e,a(n));import{w as c,y as u,z as d,G as v,W as p,H as f,K as m,L as y,B as g,U as b,V as _,C as h,D as k,E as w,M as O,F as $,T as I,aF as S,N as x,P as L,X as j,O as P,S as A,R as B,l as C,am as N,Q as U,aH as M,as as V,a8 as E,aI as F,aJ as T,a1 as D,J as H,Y as q,a9 as R,aa as G}from"./vendor.cc2194d4.js";import{u as Q,a as J,b as W,g as K,c as z,d as X,e as Y,f as Z,h as ee,i as te,j as ae,_ as ne,k as oe}from"../index.b9fa10b5.js";import"./use-layout-state.afd7196c.js";var se=c({setup(){const{t:e}=u(),t=Q(),a=J(),n=d((()=>{var e;return null===a.settings?null:(null==(e=a.settings)?void 0:e.project_logo)?W(K()+`assets/${a.settings.project_logo}`):null})),o=v(!1),{queueHasItems:s}=p(t);f((()=>s.value),(e=>{e&&(o.value=!0)}));const r=d((()=>{var e;return null==(e=a.settings)?void 0:e.project_url})),i=d((()=>{var t;return!!(null==(t=a.settings)?void 0:t.project_url)&&e("view_project")}));return{customLogoPath:n,showLoader:o,stopSpinnerIfQueueIsEmpty:function(){!1===s.value&&(o.value=!1)},url:r,urlTooltip:i}}});m("data-v-55e81bd3");const re=["src"];y(),se.render=function(e,t,a,n,o,s){const r=g("v-progress-linear"),i=b("tooltip");return _((h(),k(P(e.url?"a":"div"),{ref:"noopener noreferer",href:e.url,target:"_blank",class:j(["module-bar-logo",{loading:e.showLoader}])},{default:w((()=>[e.customLogoPath?(h(),O(L,{key:0},[$(S,{name:"fade"},{default:w((()=>[e.showLoader?(h(),k(r,{key:0,indeterminate:"",rounded:"",onAnimationiteration:e.stopSpinnerIfQueueIsEmpty},null,8,["onAnimationiteration"])):I("",!0)])),_:1}),x("img",{class:"custom-logo",src:e.customLogoPath,alt:"Project Logo"},null,8,re)],64)):(h(),O("div",{key:1,class:j(["logo",{running:e.showLoader}]),onAnimationiteration:t[0]||(t[0]=(...t)=>e.stopSpinnerIfQueueIsEmpty&&e.stopSpinnerIfQueueIsEmpty(...t))},null,34))])),_:1},8,["href","class"])),[[i,e.urlTooltip,void 0,{right:!0}]])},se.__scopeId="data-v-55e81bd3";var ie=c({setup(){const{t:e}=u(),t=z(),a=v(!1),n=d((()=>null===t.currentUser||null===t.currentUser.avatar?null:W(K()+`assets/${t.currentUser.avatar.id}?key=system-medium-cover`))),o=d((()=>{var e;return`/users/${null==(e=t.currentUser)?void 0:e.id}`})),s=d((()=>"/logout"));return{t:e,userFullName:t.fullName,avatarURL:n,userProfileLink:o,signOutActive:a,signOutLink:s}}});m("data-v-48de01cc");const le=["src","alt"];y(),ie.render=function(e,t,a,n,o,s){const r=g("v-icon"),i=g("v-button"),l=g("v-card-title"),c=g("v-card-actions"),u=g("v-card"),d=g("v-dialog"),v=g("v-avatar"),p=g("router-link"),f=g("v-hover"),m=b("tooltip");return h(),k(f,{class:"module-bar-avatar"},{default:w((({hover:a})=>[$(d,{modelValue:e.signOutActive,"onUpdate:modelValue":t[1]||(t[1]=t=>e.signOutActive=t),onEsc:t[2]||(t[2]=t=>e.signOutActive=!1)},{activator:w((({on:t})=>[_($(i,{tile:"",icon:"","x-large":"",class:j([{show:a},"sign-out"]),onClick:t},{default:w((()=>[$(r,{name:"logout"})])),_:2},1032,["class","onClick"]),[[m,e.t("sign_out"),void 0,{right:!0}]])])),default:w((()=>[$(u,null,{default:w((()=>[$(l,null,{default:w((()=>[A(B(e.t("sign_out_confirm")),1)])),_:1}),$(c,null,{default:w((()=>[$(i,{secondary:"",onClick:t[0]||(t[0]=t=>e.signOutActive=!e.signOutActive)},{default:w((()=>[A(B(e.t("cancel")),1)])),_:1}),$(i,{to:e.signOutLink},{default:w((()=>[A(B(e.t("sign_out")),1)])),_:1},8,["to"])])),_:1})])),_:1})])),_:2},1032,["modelValue"]),$(p,{to:e.userProfileLink},{default:w((()=>[_($(v,{tile:"",large:"",class:j({"no-avatar":!e.avatarURL})},{default:w((()=>[e.avatarURL?(h(),O("img",{key:0,src:e.avatarURL,alt:e.userFullName,class:"avatar-image"},null,8,le)):(h(),k(r,{key:1,name:"account_circle",outline:""}))])),_:1},8,["class"]),[[m,e.userFullName,void 0,{right:!0}]])])),_:1},8,["to"])])),_:1})},ie.__scopeId="data-v-48de01cc";var ce=c({components:{ModuleBarLogo:se,ModuleBarAvatar:ie},setup(){const e=z(),{modules:t}=X();return{internalModules:d((()=>{var a;const n=null==(a=e.currentUser)?void 0:a.role.module_list,o=C.exports.orderBy(t.value.map((e=>l(i({},e),{href:e.link,to:void 0===e.link?`/${e.id}`:""}))).filter((e=>void 0===e.hidden||!0!==N(e.hidden))),["order"],["asc"]);return n&&Array.isArray(n)&&n.length>0?[...n.map((e=>{var t,a;return(null==(t=e.link)?void 0:t.startsWith("http"))||(null==(a=e.link)?void 0:a.startsWith("//"))?l(i({},e),{href:e.link}):l(i({},e),{to:e.link})})),...o.filter((e=>!0===e.persistent))]:o})),modules:t}}});m("data-v-4f7eb916");const ue={class:"module-bar"},de={class:"modules"};y(),ce.render=function(e,t,a,n,o,s){const r=g("module-bar-logo"),i=g("v-icon"),l=g("v-button"),c=g("module-bar-avatar"),u=b("tooltip");return h(),O("div",ue,[$(r),x("div",de,[(h(!0),O(L,null,U(e.internalModules,(e=>_((h(),k(l,{key:e.id,icon:"","x-large":"",to:e.to,href:e.href,tile:"",style:M(e.color?{"--v-button-color-active":e.color}:null)},{default:w((()=>[$(i,{name:e.icon,outline:""},null,8,["name"])])),_:2},1032,["to","href","style"])),[[u,e.name,void 0,{right:!0}]]))),128))]),$(c)])},ce.__scopeId="data-v-4f7eb916";var ve=c({props:{sidebarOpen:{type:Boolean,default:!1}},setup(e){const t=v([]),a=v(!1);return f((()=>e.sidebarOpen),(async e=>{!1===e?t.value=[]:(a.value=!0,await V(),a.value=!1)})),{openDetail:t,mandatory:a}}});ve.render=function(e,t,a,n,o,s){const r=g("v-item-group");return h(),k(r,{modelValue:e.openDetail,"onUpdate:modelValue":t[0]||(t[0]=t=>e.openDetail=t),class:"sidebar-detail-group",scope:"sidebar-detail",mandatory:e.mandatory},{default:w((()=>[E(e.$slots,"default",{},void 0,!0)])),_:3},8,["modelValue","mandatory"])},ve.__scopeId="data-v-ebb6371e";var pe=1e3,fe=60*pe,me=60*fe,ye=24*me,ge=7*ye,be=365.25*ye;function _e(e,t,a,n){var o=t>=1.5*a;return Math.round(e/a)+" "+n+(o?"s":"")}var he=function(e,t){t=t||{};var a=typeof e;if("string"===a&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var a=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return a*be;case"weeks":case"week":case"w":return a*ge;case"days":case"day":case"d":return a*ye;case"hours":case"hour":case"hrs":case"hr":case"h":return a*me;case"minutes":case"minute":case"mins":case"min":case"m":return a*fe;case"seconds":case"second":case"secs":case"sec":case"s":return a*pe;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(e);if("number"===a&&isFinite(e))return t.long?function(e){var t=Math.abs(e);if(t>=ye)return _e(e,t,ye,"day");if(t>=me)return _e(e,t,me,"hour");if(t>=fe)return _e(e,t,fe,"minute");if(t>=pe)return _e(e,t,pe,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=ye)return Math.round(e/ye)+"d";if(t>=me)return Math.round(e/me)+"h";if(t>=fe)return Math.round(e/fe)+"m";if(t>=pe)return Math.round(e/pe)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))},ke=c({setup(){const{t:e}=u(),t=Y(),a=d((()=>{const e=C.exports.sortBy(t.latency,["timestamp"]);return e[e.length-1]})),n=d((()=>{if(!t.latency||0===t.latency.length)return 0;const e=C.exports.sortBy(t.latency,["timestamp"]),a=e.slice(Math.max(e.length-5,0));let n=0;for(const{latency:t}of a)n+=t;return Math.round(n/a.length)})),o=d((()=>n.value<=250?4:n.value>250&&n.value<=500?3:n.value>500&&n.value<=750?2:1)),s=d((()=>{switch(o.value){case 4:return`${e("connection_excellent")}\n(${he(n.value)} ${e("latency")})`;case 3:return`${e("connection_good")}\n(${he(n.value)} ${e("latency")})`;case 2:return`${e("connection_fair")}\n(${he(n.value)} ${e("latency")})`;case 1:return`${e("connection_poor")}\n(${he(n.value)} ${e("latency")})`;default:return null}}));return{icon:d((()=>{switch(o.value){case 4:return"signal_wifi_4_bar";case 3:return"signal_wifi_3_bar";case 2:return"signal_wifi_2_bar";case 1:return"signal_wifi_1_bar";default:return null}})),lastLatency:a,latencyTooltip:s}}});m("data-v-2cfd5c8b");const we={class:"latency-indicator"};y(),ke.render=function(e,t,a,n,o,s){const r=g("v-progress-circular"),i=g("v-icon"),l=b("tooltip");return _((h(),O("div",we,[e.lastLatency?(h(),k(i,{key:1,name:e.icon},null,8,["name"])):(h(),k(r,{key:0,indeterminate:""}))],512)),[[l,e.latencyTooltip,void 0,{bottom:!0,end:!0}]])},ke.__scopeId="data-v-2cfd5c8b";var Oe=c({components:{LatencyIndicator:ke},setup(){const e=Z();return{name:d((()=>{var t,a;return null==(a=null==(t=e.info)?void 0:t.project)?void 0:a.project_name}))}}});m("data-v-6042e59c");const $e={class:"project-info"},Ie={class:"name"};y(),Oe.render=function(e,t,a,n,o,s){const r=g("latency-indicator");return h(),O("div",$e,[$(r),x("span",Ie,B(e.name),1)])},Oe.__scopeId="data-v-6042e59c";var Se=c({props:{id:{type:String,required:!0},title:{type:String,required:!0},text:{type:String,default:null},icon:{type:String,default:null},type:{type:String,default:"info",validator:e=>["info","success","warning","error"].includes(e)},tail:{type:Boolean,default:!1},dense:{type:Boolean,default:!1},showClose:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},progress:{type:Number,default:void 0}},setup(e){const t=ee();return{close:function(){!0===e.showClose&&t.remove(e.id)}}}});m("data-v-5b51205c");const xe={key:0,class:"icon"},Le={class:"content"},je={class:"title selectable"},Pe={key:0,class:"text selectable"};y(),Se.render=function(e,t,a,n,o,s){const r=g("v-progress-circular"),i=g("v-icon");return h(),O("div",{class:j(["notification-item",[e.type,{tail:e.tail,dense:e.dense}]]),onClick:t[0]||(t[0]=(...t)=>e.close&&e.close(...t))},[e.loading||e.progress||e.icon?(h(),O("div",xe,[e.loading?(h(),k(r,{key:0,indeterminate:"",small:""})):e.progress?(h(),k(r,{key:1,small:"",value:e.progress},null,8,["value"])):(h(),k(i,{key:2,name:e.icon},null,8,["name"]))])):I("",!0),x("div",Le,[x("p",je,B(e.title),1),e.text?(h(),O("p",Pe,B(e.text),1)):I("",!0)]),e.showClose?(h(),k(i,{key:1,name:"close",clickable:"",class:"close",onClick:e.close},null,8,["onClick"])):I("",!0)],2)},Se.__scopeId="data-v-5b51205c";var Ae=c({components:{NotificationItem:Se},props:{dense:{type:Boolean,default:!1}},setup(){const e=ee();return{queue:p(e).queue}}});Ae.render=function(e,t,a,n,o,s){const r=g("notification-item");return h(),k(T,{class:"notifications-group",name:"slide-fade",tag:"div"},{default:w((()=>[E(e.$slots,"default",{},void 0,!0),(h(!0),O(L,null,U(e.queue,((t,a)=>(h(),k(r,F({key:t.id},t,{tail:a===e.queue.length-1,dense:e.dense,"show-close":!0===t.persist&&!1!==t.closeable}),null,16,["tail","dense","show-close"])))),128))])),_:3})},Ae.__scopeId="data-v-31bc6bbb";var Be=c({props:{to:{type:String,default:null},icon:{type:String,default:"box"},active:{type:Boolean,default:!1}},emits:["click"],setup(){const e=te(),{sidebarOpen:t}=p(e);return{sidebarOpen:t}}});m("data-v-733fb6d0");const Ce={class:"icon"},Ne={key:0,class:"title"};y(),Be.render=function(e,t,a,n,o,s){const r=g("v-icon");return h(),k(P(e.to?"router-link":"button"),{class:j(["sidebar-button",{active:e.active}]),onClick:t[0]||(t[0]=t=>e.$emit("click",t))},{default:w((()=>[x("div",Ce,[$(r,{name:e.icon,outline:""},null,8,["name"])]),e.sidebarOpen?(h(),O("div",Ne,[E(e.$slots,"default",{},void 0,!0)])):I("",!0)])),_:3},8,["class"])},Be.__scopeId="data-v-733fb6d0";var Ue=c({components:{SidebarButton:Be,NotificationItem:Se},props:{sidebarOpen:{type:Boolean,default:!1},modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(){const{t:e}=u();return{t:e,lastFour:ee().lastFour}}});m("data-v-8ca41ff4");const Me={class:"notifications-preview"},Ve={key:0,class:"inline"},Ee={class:"padding-box"};y(),Ue.render=function(e,t,a,n,o,s){const r=g("router-link"),i=g("notification-item"),l=g("transition-expand"),c=g("sidebar-button"),u=b("tooltip");return h(),O("div",Me,[$(l,{tag:"div"},{default:w((()=>[e.modelValue?(h(),O("div",Ve,[x("div",Ee,[$(r,{class:j(["link",{"has-items":e.lastFour.length>0}]),to:"/activity"},{default:w((()=>[A(B(e.t("show_all_activity")),1)])),_:1},8,["class"]),$(T,{tag:"div",name:"notification",class:"transition"},{default:w((()=>[(h(!0),O(L,null,U(e.lastFour,(e=>(h(),k(i,F({key:e.id},e),null,16)))),128))])),_:1})])])):I("",!0)])),_:1}),_($(c,{active:e.modelValue,class:"toggle",icon:"notifications",onClick:t[0]||(t[0]=t=>e.$emit("update:modelValue",!e.modelValue))},{default:w((()=>[A(B(e.t("notifications")),1)])),_:1},8,["active"]),[[u,e.t("notifications"),void 0,{left:!0}]])])},Ue.__scopeId="data-v-8ca41ff4";var Fe=c({setup(){const{t:e}=u(),{parsedInfo:t}=ae(),a=ee(),n=z();return{t:e,notifications:d((()=>a.dialogs)),admin:n.isAdmin,done:function(e){a.remove(e)},getGitHubIssueLink:function(e,a){var n,o,s,r;const i=`\x3c!-- Please put a detailed explanation of the problem here. --\x3e\n\n---\n\n### Project details\nDirectus Version: ${null==(n=t.value)?void 0:n.directus.version}\nEnvironment: production\nOS: ${null==(o=t.value)?void 0:o.os.type} ${null==(s=t.value)?void 0:s.os.version}\nNode: ${null==(r=t.value)?void 0:r.node.version}\n\n### Error\n\nTitle: ${a.title||"none"}\nMessage: ${a.text||"none"}\n\n<details>\n<summary>Stack Trace</summary>\n<pre>\n${JSON.stringify(a.error,Object.getOwnPropertyNames(a.error),2)}\n</pre>\n</details>\n\t\t\t`;return`https://github.com/directus/directus/issues/new?body=${encodeURIComponent(i)}`}}}});m("data-v-bb61b36a");const Te={class:"notification-dialogs"},De=["href"];y(),Fe.render=function(e,t,a,n,o,s){const r=g("v-card-title"),i=g("v-error"),l=g("v-card-text"),c=g("v-button"),u=g("v-card-actions"),d=g("v-card"),v=g("v-dialog");return h(),O("div",Te,[(h(!0),O(L,null,U(e.notifications,(t=>(h(),k(v,{key:t.id,"model-value":!0,persist:""},{default:w((()=>[$(d,{class:j([t.type])},{default:w((()=>[$(r,null,{default:w((()=>[A(B(t.title),1)])),_:2},1024),t.text?(h(),k(l,{key:0},{default:w((()=>[A(B(t.text)+" ",1),t.error?(h(),k(i,{key:0,error:t.error},null,8,["error"])):I("",!0)])),_:2},1024)):I("",!0),$(u,null,{default:w((()=>["error"===t.type&&e.admin&&"UNKNOWN"===t.code?(h(),k(c,{key:0,secondary:""},{default:w((()=>[x("a",{target:"_blank",href:e.getGitHubIssueLink(t.id,t)},B(e.t("report_error")),9,De)])),_:2},1024)):I("",!0),$(c,{onClick:a=>e.done(t.id)},{default:w((()=>[A(B(e.t("dismiss")),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1032,["class"])])),_:2},1024)))),128))])},Fe.__scopeId="data-v-bb61b36a";var He=c({components:{ModuleBar:ce,SidebarDetailGroup:ve,HeaderBar:ne,ProjectInfo:Oe,NotificationsGroup:Ae,NotificationsPreview:Ue,NotificationDialogs:Fe},props:{title:{type:String,default:null},smallHeader:{type:Boolean,default:!1}},setup(e){const{t:t}=u(),a=D(),{title:n}=p(e),o=v(!1),s=v(),r=z(),i=te(),l=d((()=>{var e,t;return!r.currentUser||((null==(t=null==(e=r.currentUser)?void 0:e.role)?void 0:t.app_access)||!1)})),c=v(!1),{sidebarOpen:f}=p(i),m=d((()=>{var e;return(null==(e=r.currentUser)?void 0:e.theme)||"auto"}));return H("main-element",s),a.afterEach((async()=>{var e;null==(e=s.value)||e.scrollTo({top:0})})),oe(n),{t:t,navOpen:o,contentEl:s,theme:m,sidebarOpen:f,openSidebar:function(e){e.target&&!1===e.target.classList.contains("close")&&(f.value=!0)},notificationsPreviewActive:c,appAccess:l}}});m("data-v-8653c3b8");const qe=A("Switch User"),Re={class:"module-nav alt-colors"},Ge={class:"module-nav-content"},Qe={ref:"contentEl",class:"content"},Je={class:"flex-container"},We=x("div",{class:"spacer"},null,-1);y(),He.render=function(e,t,a,n,o,s){const r=g("v-button"),i=g("v-info"),l=g("module-bar"),c=g("project-info"),u=g("header-bar"),d=g("sidebar-detail-group"),v=g("notifications-preview"),p=g("v-overlay"),f=g("notifications-group"),m=g("notification-dialogs");return!1===e.appAccess?(h(),k(i,{key:0,center:"",title:e.t("no_app_access"),type:"danger",icon:"block"},{append:w((()=>[$(r,{to:"/logout"},{default:w((()=>[qe])),_:1})])),default:w((()=>[A(B(e.t("no_app_access_copy"))+" ",1)])),_:1},8,["title"])):(h(),O("div",{key:1,class:j(["private-view",{theme:e.theme}])},[x("aside",{role:"navigation","aria-label":"Module Navigation",class:j(["navigation",{"is-open":e.navOpen}])},[$(l),x("div",Re,[$(c),x("div",Ge,[E(e.$slots,"navigation",{},void 0,!0)])])],2),x("div",Qe,[$(u,{small:e.smallHeader,"show-sidebar-toggle":"",title:e.title,"onToggle:sidebar":t[0]||(t[0]=t=>e.sidebarOpen=!e.sidebarOpen),onPrimary:t[1]||(t[1]=t=>e.navOpen=!e.navOpen)},q({_:2},[U(e.$slots,((t,a)=>({name:a,fn:w((t=>[E(e.$slots,a,R(G(t)),void 0,!0)]))})))]),1032,["small","title"]),x("main",null,[E(e.$slots,"default",{},void 0,!0)])],512),x("aside",{role:"contentinfo",class:j(["sidebar alt-colors",{"is-open":e.sidebarOpen}]),"aria-label":"Module Sidebar",onClick:t[3]||(t[3]=(...t)=>e.openSidebar&&e.openSidebar(...t))},[x("div",Je,[$(d,{"sidebar-open":e.sidebarOpen},{default:w((()=>[E(e.$slots,"sidebar",{},void 0,!0)])),_:3},8,["sidebar-open"]),We,$(v,{modelValue:e.notificationsPreviewActive,"onUpdate:modelValue":t[2]||(t[2]=t=>e.notificationsPreviewActive=t),"sidebar-open":e.sidebarOpen},null,8,["modelValue","sidebar-open"])])],2),$(p,{class:"nav-overlay",active:e.navOpen,onClick:t[4]||(t[4]=t=>e.navOpen=!1)},null,8,["active"]),$(p,{class:"sidebar-overlay",active:e.sidebarOpen,onClick:t[5]||(t[5]=t=>e.sidebarOpen=!1)},null,8,["active"]),!1===e.notificationsPreviewActive?(h(),k(f,{key:0,dense:!1===e.sidebarOpen},null,8,["dense"])):I("",!0),$(m)],2))},He.__scopeId="data-v-8653c3b8";export{He as PrivateView,He as default};
