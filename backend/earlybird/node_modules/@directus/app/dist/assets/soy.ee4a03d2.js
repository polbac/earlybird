import{bn as t}from"./vendor.cc2194d4.js";import{a as e}from"./htmlmixed.4125bbe9.js";var a,n,r,o,s={};a=t.exports,e.exports,r={alias:{noEndTag:!0},delpackage:{noEndTag:!0},namespace:{noEndTag:!0,soyState:"namespace-def"},"@attribute":n={noEndTag:!0,soyState:"param-def"},"@attribute?":n,"@param":n,"@param?":n,"@inject":n,"@inject?":n,"@state":n,template:{soyState:"templ-def",variableScope:!0},extern:{soyState:"param-def"},export:{soyState:"export"},literal:{},msg:{},fallbackmsg:{noEndTag:!0,reduceIndent:!0},select:{},plural:{},let:{soyState:"var-def"},if:{},javaimpl:{},jsimpl:{},elseif:{noEndTag:!0,reduceIndent:!0},else:{noEndTag:!0,reduceIndent:!0},switch:{},case:{noEndTag:!0,reduceIndent:!0},default:{noEndTag:!0,reduceIndent:!0},foreach:{variableScope:!0,soyState:"for-loop"},ifempty:{noEndTag:!0,reduceIndent:!0},for:{variableScope:!0,soyState:"for-loop"},call:{soyState:"templ-ref"},param:{soyState:"param-ref"},print:{noEndTag:!0},deltemplate:{soyState:"templ-def",variableScope:!0},delcall:{soyState:"templ-ref"},log:{},element:{variableScope:!0},velog:{},const:{soyState:"const-def"}},o=Object.keys(r).filter((function(t){return!r[t].noEndTag||r[t].reduceIndent})),a.defineMode("soy",(function(t){var e=a.getMode(t,"text/plain"),n={html:a.getMode(t,{name:"text/html",multilineTagIndentFactor:2,multilineTagIndentPastTag:!1,allowMissingTagName:!0}),attributes:e,text:e,uri:e,trusted_resource_uri:e,css:a.getMode(t,"text/css"),js:a.getMode(t,{name:"text/javascript",statementIndent:2*t.indentUnit})};function s(t){return t[t.length-1]}function l(t,e,a){if(t.sol()){for(var n=0;n<e.indent&&t.eat(/\s/);n++);if(n)return null}var r=t.string,o=a.exec(r.substr(t.pos));o&&(t.string=r.substr(0,t.pos+o.index));var l=t.hideFirstChars(e.indent,(function(){var a=s(e.localStates);return a.mode.token(t,a.state)}));return t.string=r,l}function i(t,e){for(;t;){if(t.element===e)return!0;t=t.next}return!1}function p(t,e){return{element:e,next:t}}function c(t){t.context&&(t.context.scope&&(t.variables=t.context.scope),t.context=t.context.previousContext)}function u(t,e,a){return i(t,e)?"variable-2":a?"variable":"variable-2 error"}function m(t,e,a){this.previousContext=t,this.tag=e,this.kind=null,this.scope=a}function d(t,e){var a;return t.match(/[[]/)?(e.soyState.push("list-literal"),e.context=new m(e.context,"list-literal",e.variables),e.lookupVariables=!1,null):t.match(/map\b/)?(e.soyState.push("map-literal"),"keyword"):t.match(/record\b/)?(e.soyState.push("record-literal"),"keyword"):t.match(/([\w]+)(?=\()/)?"variable callee":(a=t.match(/^["']/))?(e.soyState.push("string"),e.quoteKind=a[0],"string"):t.match(/^[(]/)?(e.soyState.push("open-parentheses"),null):t.match(/(null|true|false)(?!\w)/)||t.match(/0x([0-9a-fA-F]{2,})/)||t.match(/-?([0-9]*[.])?[0-9]+(e[0-9]*)?/)?"atom":t.match(/(\||[+\-*\/%]|[=!]=|\?:|[<>]=?)/)?"operator":(a=t.match(/^\$([\w]+)/))?u(e.variables,a[1],!e.lookupVariables):(a=t.match(/^\w+/))?/^(?:as|and|or|not|in|if)$/.test(a[0])?"keyword":null:(t.next(),null)}return{startState:function(){return{soyState:[],variables:p(null,"ij"),scopes:null,indent:0,quoteKind:null,context:null,lookupVariables:!0,localStates:[{mode:n.html,state:a.startState(n.html)}]}},copyState:function(t){return{tag:t.tag,soyState:t.soyState.concat([]),variables:t.variables,context:t.context,indent:t.indent,quoteKind:t.quoteKind,lookupVariables:t.lookupVariables,localStates:t.localStates.map((function(t){return{mode:t.mode,state:a.copyState(t.mode,t.state)}}))}},token:function(e,i){switch(s(i.soyState)){case"comment":if(e.match(/^.*?\*\//)?i.soyState.pop():e.skipToEnd(),!i.context||!i.context.scope)for(var y=/@param\??\s+(\S+)/g,h=e.current();S=y.exec(h);)i.variables=p(i.variables,S[1]);return"comment";case"string":var S;return(S=e.match(/^.*?(["']|\\[\s\S])/))?S[1]==i.quoteKind&&(i.quoteKind=null,i.soyState.pop()):e.skipToEnd(),"string"}if(!i.soyState.length||"literal"!=s(i.soyState)){if(e.match(/^\/\*/))return i.soyState.push("comment"),"comment";if(e.match(e.sol()?/^\s*\/\/.*/:/^\s+\/\/.*/))return"comment"}switch(s(i.soyState)){case"templ-def":return(S=e.match(/^\.?([\w]+(?!\.[\w]+)*)/))?(i.soyState.pop(),"def"):(e.next(),null);case"templ-ref":return(S=e.match(/(\.?[a-zA-Z_][a-zA-Z_0-9]+)+/))?(i.soyState.pop(),"."==S[0][0]?"variable-2":"variable"):(S=e.match(/^\$([\w]+)/))?(i.soyState.pop(),u(i.variables,S[1],!i.lookupVariables)):(e.next(),null);case"namespace-def":return(S=e.match(/^\.?([\w\.]+)/))?(i.soyState.pop(),"variable"):(e.next(),null);case"param-def":return(S=e.match(/^\*/))?(i.soyState.pop(),i.soyState.push("param-type"),"type"):(S=e.match(/^\w+/))?(i.variables=p(i.variables,S[0]),i.soyState.pop(),i.soyState.push("param-type"),"def"):(e.next(),null);case"param-ref":return(S=e.match(/^\w+/))?(i.soyState.pop(),"property"):(e.next(),null);case"open-parentheses":return e.match(/[)]/)?(i.soyState.pop(),null):d(e,i);case"param-type":var f=e.peek();return-1!="}]=>,".indexOf(f)?(i.soyState.pop(),null):"["==f?(i.soyState.push("param-type-record"),null):"("==f?(i.soyState.push("param-type-template"),null):"<"==f?(i.soyState.push("param-type-parameter"),null):(S=e.match(/^([\w]+|[?])/))?"type":(e.next(),null);case"param-type-record":return"]"==(f=e.peek())?(i.soyState.pop(),null):e.match(/^\w+/)?(i.soyState.push("param-type"),"property"):(e.next(),null);case"param-type-parameter":return e.match(/^[>]/)?(i.soyState.pop(),null):e.match(/^[<,]/)?(i.soyState.push("param-type"),null):(e.next(),null);case"param-type-template":return e.match(/[>]/)?(i.soyState.pop(),i.soyState.push("param-type"),null):e.match(/^\w+/)?(i.soyState.push("param-type"),"def"):(e.next(),null);case"var-def":return(S=e.match(/^\$([\w]+)/))?(i.variables=p(i.variables,S[1]),i.soyState.pop(),"def"):(e.next(),null);case"for-loop":return e.match(/\bin\b/)?(i.soyState.pop(),"keyword"):"$"==e.peek()?(i.soyState.push("var-def"),null):(e.next(),null);case"record-literal":return e.match(/^[)]/)?(i.soyState.pop(),null):e.match(/[(,]/)?(i.soyState.push("map-value"),i.soyState.push("record-key"),null):(e.next(),null);case"map-literal":return e.match(/^[)]/)?(i.soyState.pop(),null):e.match(/[(,]/)?(i.soyState.push("map-value"),i.soyState.push("map-value"),null):(e.next(),null);case"list-literal":return e.match("]")?(i.soyState.pop(),i.lookupVariables=!0,c(i),null):e.match(/\bfor\b/)?(i.lookupVariables=!0,i.soyState.push("for-loop"),"keyword"):d(e,i);case"record-key":return e.match(/[\w]+/)?"property":e.match(/^[:]/)?(i.soyState.pop(),null):(e.next(),null);case"map-value":return")"==e.peek()||","==e.peek()||e.match(/^[:)]/)?(i.soyState.pop(),null):d(e,i);case"import":return e.eat(";")?(i.soyState.pop(),i.indent-=2*t.indentUnit,null):e.match(/\w+(?=\s+as)/)?"variable":(S=e.match(/\w+/))?/(from|as)/.test(S[0])?"keyword":"def":(S=e.match(/^["']/))?(i.soyState.push("string"),i.quoteKind=S[0],"string"):(e.next(),null);case"tag":void 0===i.tag?(k=!0,E=""):E=(k="/"==i.tag[0])?i.tag.substring(1):i.tag;var g=r[E];if(e.match(/^\/?}/)){var b="/}"==e.current();return b&&!k&&c(i),"/template"==i.tag||"/deltemplate"==i.tag?(i.variables=p(null,"ij"),i.indent=0):i.indent-=t.indentUnit*(b||-1==o.indexOf(i.tag)?2:1),i.soyState.pop(),"keyword"}if(e.match(/^([\w?]+)(?==)/)){if(i.context&&i.context.tag==E&&"kind"==e.current()&&(S=e.match(/^="([^"]+)/,!1))){var x=S[1];i.context.kind=x;var v=n[x]||n.html;(U=s(i.localStates)).mode.indent&&(i.indent+=U.mode.indent(U.state,"","")),i.localStates.push({mode:v,state:a.startState(v)})}return"attribute"}return d(e,i);case"template-call-expression":return e.match(/^([\w-?]+)(?==)/)?"attribute":e.eat(">")||e.eat("/>")?(i.soyState.pop(),"keyword"):d(e,i);case"literal":return e.match("{/literal}",!1)?(i.soyState.pop(),this.token(e,i)):l(e,i,/\{\/literal}/);case"export":if(S=e.match(/\w+/)){if(i.soyState.pop(),"const"==S)return i.soyState.push("const-def"),"keyword";if("extern"==S)return i.soyState.push("param-def"),"keyword"}else e.next();return null;case"const-def":return e.match(/^\w+/)?(i.soyState.pop(),"def"):(e.next(),null)}if(e.match("{literal}"))return i.indent+=t.indentUnit,i.soyState.push("literal"),i.context=new m(i.context,"literal",i.variables),"keyword";if(S=e.match(/^\{([/@\\]?\w+\??)(?=$|[\s}]|\/[/*])/)){var w=i.tag;i.tag=S[1];var k="/"==i.tag[0],T=!!r[i.tag],E=k?i.tag.substring(1):i.tag;g=r[E],"/switch"!=i.tag&&(i.indent+=((k||g&&g.reduceIndent)&&"switch"!=w?1:2)*t.indentUnit),i.soyState.push("tag");var j=!1;if(g)if(k||g.soyState&&i.soyState.push(g.soyState),g.noEndTag||!T&&k){if(k){var I="extern"==E&&i.context&&"export"==i.context.tag;if(!i.context||i.context.tag!=E&&!I)j=!0;else if(i.context){var U;i.context.kind&&(i.localStates.pop(),(U=s(i.localStates)).mode.indent&&(i.indent-=U.mode.indent(U.state,"",""))),c(i)}}}else i.context=new m(i.context,i.tag,g.variableScope?i.variables:null);else k&&(j=!0);return(j?"error ":"")+"keyword"}return e.eat("{")?(i.tag="print",i.indent+=2*t.indentUnit,i.soyState.push("tag"),"keyword"):!i.context&&e.match(/\bimport\b/)?(i.soyState.push("import"),i.indent+=2*t.indentUnit,"keyword"):(S=e.match("<{"))?(i.soyState.push("template-call-expression"),i.indent+=2*t.indentUnit,i.soyState.push("tag"),"keyword"):(S=e.match("</>"))?(i.indent-=1*t.indentUnit,"keyword"):l(e,i,/\{|\s+\/\/|\/\*/)},indent:function(e,n,r){var o=e.indent,l=s(e.soyState);if("comment"==l)return a.Pass;if("literal"==l)/^\{\/literal}/.test(n)&&(o-=t.indentUnit);else{if(/^\s*\{\/(template|deltemplate)\b/.test(n))return 0;/^\{(\/|(fallbackmsg|elseif|else|ifempty)\b)/.test(n)&&(o-=t.indentUnit),"switch"!=e.tag&&/^\{(case|default)\b/.test(n)&&(o-=t.indentUnit),/^\{\/switch\b/.test(n)&&(o-=t.indentUnit)}var i=s(e.localStates);return o&&i.mode.indent&&(o+=i.mode.indent(i.state,n,r)),o},innerMode:function(t){return t.soyState.length&&"literal"!=s(t.soyState)?null:s(t.localStates)},electricInput:/^\s*\{(\/|\/template|\/deltemplate|\/switch|fallbackmsg|elseif|else|case|default|ifempty|\/literal\})$/,lineComment:"//",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",useInnerComments:!1,fold:"indent"}}),"htmlmixed"),a.registerHelper("wordChars","soy",/[\w$]/),a.registerHelper("hintWords","soy",Object.keys(r).concat(["css","debugger"])),a.defineMIME("text/x-soy","soy");var l=s,i=Object.freeze(Object.assign(Object.create(null),s,{[Symbol.toStringTag]:"Module",default:l}));export{i as s};
